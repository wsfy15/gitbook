# 冯诺依曼体系结构

## 计算机硬件组成

一台计算机需要**CPU**（Central Processing Unit）进行计算，**内存**存放程序读取的数据、计算得到的结果，**主板**（Motherboard）进行数据传输。

主板是一个有着各种各样，多达数十乃至上百个插槽的配件。 CPU 要插在主板上，内存也要插在主板上。主板的**芯片组**（Chipset）和**总线**（Bus）解决了 CPU 和内存之间如何通信的问题。芯片组控制了数据传输的流转，也就是数据从哪里到哪里的问题。总线则是实际数据传输的高速公路。因此，**总线速度**（Bus Speed）决定了数据能传输得多快。

有了这三大件，再配上**电源**供电，计算机差不多就可以跑起来了。要使用这台计算机，还需要输入（Input）/ 输出（Output）设备，即**I/O 设备**。显示器是**输出设备**，鼠标和键盘是**输入设备**。

为了持久化保存数据，还需要硬盘，硬盘主要有机械硬盘HDD（Hard Disk Drive）和 固态硬盘SSD（Solid State Drive）。不过网吧里的机器一般没有硬盘，而是直接通过局域网，读写远程网络硬盘里面的数据。

现代计算机基本都会配置独立的**显卡**（Graphics Card），显卡里的**GPU**（Graphics Processing Unit，图形处理器）可以快速地进行一些固定的计算，用于图形渲染和深度学习。

鼠标、键盘以及硬盘，这些都是插在主板上的。主板上的**南桥**（SouthBridge）芯片组，**控制这些外部I/O 设备和 CPU 之间的通信**。“南桥”芯片的名字很直观，一方面，它在主板上的位置，通常在主板的“南面”。另一方面，它的作用就是作为“桥”，来连接外部设备和 CPU 之间的通信。

有了南桥，自然对应着也有“北桥”。是的，以前的主板上通常也有“北桥”芯片，用来作为“桥”，**连接 CPU 和内存、显卡之间的通信**。不过，随着时间的变迁，现在的主板上的“北桥”芯片的工作，已经被移到了 CPU 的内部。



## 冯·诺依曼体系结构

智能手机的组成与计算机的组成类似，不过手机里只有 SD 卡（Secure Digital Memory Card）这样类似硬盘功能的存储卡插槽，其他的组成，包括CPU、内存、网络通信，乃至摄像头芯片，都封装到一个芯片，然后再嵌入到手机主板上。这种方式叫**SoC**，也就是 System on a Chip（系统芯片）。

计算机和智能手机都遵循同一个“计算机”的抽象概念，，即**冯·诺依曼体系结构**，也叫**存储程序计算机**。这个名字暗含了两个概念，一个是“**可编程**”计算机，一个是“**存储**”计算机。

### 可编程

**不可编程**：计算机是由各种门电路组合而成的，然后通过组装出一个固定的电路版，来完成一个特定的计算程序。一旦需要修改功能，就要重新组装电路。这样的话，计算机就是“不可编程”的，因为**程序在计算机硬件层面是“写死”的**。最常见的就是老式计算器，电路板设好了加减乘除，做不了任何计算逻辑固定之外的事情。



### 存储

程序本身是存储在计算机的内存里，可以通过加载不同的程序来解决不同的问题。

有“存储程序计算机”，自然也有不能存储程序的计算机。典型的就是早年的“Plugboard”插线板式的计算机。整个计算机就是一个巨大的插线板，通过在板子上不同的插头或者接口的位置插入线路，来实现不同的功能。这样的计算机自然是“可编程”的，但是编写好的程序不能存储下来供下一次加载使用，不得不每次要用到和当前不同的“程序”的时候，重新插板子，重新“编程”。

无论是“不可编程”还是“不可存储”，都会让使用计算机的效率大大下降。而这个对于效率的追求，也就是“存储程序计算机”的由来。



### 具体组成

在冯诺依曼编写的[*First Draft of a Report on the EDVAC*](https://en.wikipedia.org/wiki/First_Draft_of_a_Report_on_the_EDVAC)中，介绍了一台计算机应该有哪些部分组成：

- 一个包含算术逻辑单元（Arithmetic Logic Unit，ALU）和处理器寄存器（Processor Register）的**处理器单元**（Processing Unit），用来完成各种算术和逻辑运算。因为它能够完成各种数据的处理或者计算工作，因此也有人把这个叫作数据通路（Datapath）或者运算器。
- 一个包含指令寄存器（Instruction Reigster）和程序计数器（Program Counter）的**控制器单元**（Control Unit/CU），用来控制程序的流程，通常就是不同条件下的分支和跳转。在现在的计算机里，上面的算术逻辑单元和这里的控制器单元，共同组成了 CPU。
- 用来存储数据（Data）和指令（Instruction）的**内存**，以及更大容量的**外部存储**。
- 各种**输入和输出设备**，以及对应的输入和输出机制。无论是使用什么样的计算机，其实都是和输入输出设备在打交道。个人电脑的鼠标键盘是输入设备，显示器是输出设备。智能手机的触摸屏既是输入设备，又是输出设备。而跑在各种云上的服务器，则是通过网络来进行输入和输出。这个时候，网卡既是输入设备又是输出设备。

**任何一台计算机的任何一个部件都可以归到运算器、控制器、存储器、输入设备和输出设备中，而所有的现代计算机也都是基于这个基础架构来设计开发的。**

所有的计算机程序，也都可以抽象为从**输入设备**读取输入信息，通过**运算器**和**控制器**来执行存储在**存储器**里的程序，最终把结果输出到**输出设备**中。而我们撰写的无论高级还是低级语言的程序，也都是基于这样一个抽象框架来进行运作的。

![冯诺依曼体系结构](冯诺依曼体系结构.assets/1920px-Von_Neumann_Architecture.svg.png)



## 图灵机

图灵机是一种**思想模型**（计算机的基本理论基础），是一种有穷的、构造性的问题的求解思路，图灵认为凡是能用算法解决的问题也一定能用图灵机解决。

冯·诺依曼提出了“存储程序”的计算机设计思想，并“参照”图灵模型设计了历史上第一台电子计算机，即冯·诺依曼机。

图灵机是一个抽象的“思维实验”，而冯·诺依曼机对应着这个“思维实验”的“物理实现”。如果把“图灵机”当成“灵魂”，代表计算机最抽象的本质，那么“冯诺伊曼机”就是“肉体”，代表了计算机最具体的本质。

